<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LinkedIn Post Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Favicon and App Icons -->
    <link rel="apple-touch-icon" sizes="57x57" href="icons/apple-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="icons/apple-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="icons/apple-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="icons/apple-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="icons/apple-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="icons/apple-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="icons/apple-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/apple-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-icon-180x180.png">
    <link rel="icon" type="image/png" sizes="192x192" href="icons/android-icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="96x96" href="icons/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
    <link rel="icon" href="icons/favicon.ico" type="image/x-icon">
    <link rel="manifest" href="icons/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="icons/ms-icon-144x144.png">
    <meta name="theme-color" content="#ffffff">
    
    <!-- Your existing styles remain unchanged -->
    <style>
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(34, 197, 94, 0.3); }
            50% { box-shadow: 0 0 30px rgba(34, 197, 94, 0.6); }
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .gradient-bg {
            background: linear-gradient(-45deg, #1e40af, #059669, #0ea5e9, #10b981);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
        }
        
        .float-animation {
            animation: float 6s ease-in-out infinite;
        }
        
        .pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite;
        }
        
        .shimmer-effect {
            position: relative;
            overflow: hidden;
        }
        
        .shimmer-effect::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            animation: shimmer 2s infinite;
        }
        
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .hover-scale {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .hover-scale:hover {
            transform: scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }

        .post-content {
            line-height: 1.7;
            font-size: 1rem;
        }
        
        .post-content p {
            margin-bottom: 1rem;
        }
    </style>
</head>
<body class="min-h-screen gradient-bg text-white">
    <!-- Improved container with better max-width and padding -->
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <div class="text-center mb-12 float-animation">
            <h1 class="text-4xl md:text-5xl font-bold mb-4">
                <span class="text-white">üöÄ</span> 
                <span class="bg-gradient-to-r from-green-400 to-blue-400 bg-clip-text text-transparent">LinkedIn Post Generator</span>
            </h1>
            <p class="text-lg text-gray-200 max-w-2xl mx-auto leading-relaxed">
                Generate professional LinkedIn posts powered by AI. Transform your GitHub projects into engaging social content.
            </p>
        </div>

        <!-- Single container layout instead of 2-column grid -->
        <div class="glass-effect rounded-3xl p-6 md:p-8 hover-scale mb-8">
            <!-- Input Section -->
            <div class="mb-8">
                <h2 class="text-2xl font-semibold mb-6 text-green-400 flex items-center gap-2">
                    üìù Create Your Post
                </h2>
                
                <!-- Improved form layout with better spacing -->
                <div class="space-y-6">
                    <!-- GitHub Link Input -->
                    <div>
                        <label class="block text-sm font-medium mb-2 text-gray-200">
                            Topic or GitHub Repo Link
                        </label>
                        <div class="relative">
                            <input 
                                type="url" 
                                id="githubLink"
                                placeholder="https://github.com/username/repository"
                                class="w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent text-white placeholder-gray-400 transition-all duration-300"
                            >
                            <div class="absolute inset-y-0 right-0 flex items-center pr-3">
                                <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z" clip-rule="evenodd"></path>
                                </svg>
                            </div>
                        </div>
                    </div>

                    <!-- Improved tone selection layout -->
                    <div class="flex flex-col sm:flex-row gap-4">
                        <div class="flex-1">
                            <label class="block text-sm font-medium mb-2 text-gray-200">
                                Tone
                            </label>
                            <select 
                                id="tone"
                                class="w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-white transition-all duration-300"
                            >
                                <option value="Professional">Professional</option>
                                <option value="Casual" selected>Casual</option>
                                <option value="Enthusiastic">Enthusiastic</option>
                                <option value="Technical">Technical</option>
                                <option value="Storytelling">Storytelling</option>
                            </select>
                        </div>
                        
                        <!-- Generate button moved inline with tone selector on larger screens -->
                        <div class="flex-1 sm:flex sm:items-end">
                            <button 
                                id="generateBtn"
                                class="w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 transform hover:scale-105 pulse-glow shimmer-effect"
                            >
                                ‚ú® Generate Post
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Output section now directly below input in same container -->
            <div class="border-t border-gray-600 pt-8">
                <h2 class="text-2xl font-semibold mb-6 text-black-400 flex items-center gap-2">
                    üì± Generated LinkedIn Post
                </h2>
                
                <div id="loadingState" class="hidden text-center py-12">
                    <div class="inline-block animate-spin rounded-full h-12 w-12 border-b-4 border-green-400 mb-4"></div>
                    <p class="text-lg text-gray-300">Generating your amazing post...</p>
                </div>
                
                <div id="outputContainer" class="hidden">
                    <!-- Better styled output with improved spacing -->
                    <div class="bg-gray-800/50 rounded-2xl p-6 border border-gray-600 mb-6">
                        <div id="generatedPost" class="post-content text-gray-200 whitespace-pre-wrap leading-relaxed">
                            <!-- Generated content will appear here -->
                        </div>
                    </div>
                    
                    <!-- Improved button layout -->
                    <div class="flex flex-col sm:flex-row gap-3">
                        <button 
                            id="copyBtn"
                            class="flex-1 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 flex items-center justify-center gap-2"
                        >
                            üìã Copy Post
                        </button>
                        <button 
                            id="shareBtn"
                            class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-xl transition-all duration-300 flex items-center justify-center gap-2"
                        >
                            üîó Share on LinkedIn
                        </button>
                    </div>
                </div>
                
                <div id="placeholderContent" class="text-center py-12 text-gray-400">
                    <div class="text-6xl mb-4">üéØ</div>
                    <p class="text-lg mb-2">Your generated LinkedIn post will appear here</p>
                    <p class="text-sm">Enter a GitHub repo link and click generate!</p>
                </div>
            </div>
        </div>

        <!-- Simplified features section with better spacing -->
        <div class="grid md:grid-cols-3 gap-6">
            <div class="glass-effect rounded-2xl p-6 text-center hover-scale">
                <div class="text-4xl mb-3">ü§ñ</div>
                <h4 class="text-lg font-semibold mb-2 text-black-400">AI-Powered</h4>
                <p class="text-gray-300 text-sm">Advanced AI analyzes your projects</p>
            </div>
            <div class="glass-effect rounded-2xl p-6 text-center hover-scale">
                <div class="text-4xl mb-3">‚ö°</div>
                <h4 class="text-lg font-semibold mb-2 text-black-400">Lightning Fast</h4>
                <p class="text-gray-300 text-sm">Generate posts in seconds</p>
            </div>
            <div class="glass-effect rounded-2xl p-6 text-center hover-scale">
                <div class="text-4xl mb-3">üé®</div>
                <h4 class="text-lg font-semibold mb-2 text-black-400">Multiple Tones</h4>
                <p class="text-gray-300 text-sm">Match your personal brand</p>
            </div>
        </div>
    </div>

    <script type="module">
        import { Client } from "https://cdn.jsdelivr.net/npm/@gradio/client/dist/index.min.js";

        document.addEventListener("DOMContentLoaded", async () => {
            const generateBtn = document.getElementById("generateBtn");
            const githubLink = document.getElementById("githubLink");
            const tone = document.getElementById("tone");
            const loadingState = document.getElementById("loadingState");
            const outputContainer = document.getElementById("outputContainer");
            const placeholderContent = document.getElementById("placeholderContent");
            const generatedPost = document.getElementById("generatedPost");
            const copyBtn = document.getElementById("copyBtn");
            const shareBtn = document.getElementById("shareBtn");

            // Connect to Hugging Face Space
            let app;
            try {
                app = await Client.connect("selva1909/LinkedinPostGenerator");
                console.log("‚úÖ Connected to Gradio app");
            } catch (error) {
                console.error("‚ùå Failed to connect:", error);
                alert("Failed to connect to backend. Please refresh and try again.");
                return;
            }

            // Handle Generate button click
            generateBtn.addEventListener("click", async () => {
                const topic = githubLink.value.trim();
                const selectedTone = tone.value;

                if (!topic) {
                    alert("‚ö†Ô∏è Please enter a topic or GitHub repository link!");
                    return;
                }

                // Show loading state
                placeholderContent.classList.add("hidden");
                outputContainer.classList.add("hidden");
                loadingState.classList.remove("hidden");

                try {
                    // Call Gradio API
                    const result = await app.predict("/generate_post", {
                        topic: topic,
                        tone: selectedTone
                    });

                    console.log("Gradio response:", result);

                    // Display generated content
                    generatedPost.textContent = result.data[0] || "‚ö†Ô∏è No content generated.";

                    // Show output
                    loadingState.classList.add("hidden");
                    outputContainer.classList.remove("hidden");
                } catch (error) {
                    console.error("‚ùå Error generating post:", error);
                    alert("Failed to generate post. Please try again later.");
                    loadingState.classList.add("hidden");
                    placeholderContent.classList.remove("hidden");
                }
            });

            // Copy functionality
            copyBtn.addEventListener("click", async () => {
                try {
                    await navigator.clipboard.writeText(generatedPost.textContent);
                    copyBtn.innerHTML = "‚úÖ Copied!";
                    setTimeout(() => (copyBtn.innerHTML = "üìã Copy Post"), 2000);
                } catch {
                    alert("‚ö†Ô∏è Failed to copy");
                }
            });

            // Share on LinkedIn
            shareBtn.addEventListener("click", () => {
                const text = encodeURIComponent(generatedPost.textContent);
                const linkedinUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(window.location.href)}&text=${text}`;
                window.open(linkedinUrl, "_blank");
            });
        });
    </script>
</body>
</html>
